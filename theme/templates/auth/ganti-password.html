{% extends "auth/layout.html" %} {% load static %} {% load widget_tweaks %} 
{% block content %} {% load bootstrap_icons %}

<!-- From Uiverse.io by themrsami -->
<div class="hero bg-base-200 min-h-screen">
  <div class="hero-content flex-col lg:flex-row-reverse">
    <div class="card bg-base-100 w-full max-w-sm shrink-0 shadow-2xl">
      <div class="card-body">  
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Ganti Password</h2>
      {% if messages %}
        {% for m in messages %}
          {% if m.tags == 'success' %}
            <div role="alert" class="alert alert-success mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>{{ m }}</span>
            </div>
          {% endif %}
          {% if m.tags == 'error' %}
            <div role="alert" class="alert alert-error mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>{{ m }}</span>
            </div>
          {% endif %}
        {% endfor %}
      {% endif %}
        <form class="flex flex-col" method="post">
          {% csrf_token %}
          <div class="input max-w-sm mb-4" data-hs-toggle-password-group="">
              <label class="label-text my-auto me-3 p-0" for="old_password">Password Lama</label>
              <div class="relative">
                {{ form.old_password }}
                <button type="button" data-hs-toggle-password='{
                    "target": ["#old-password", "#new-password1", "#new-password2"]
                  }' class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500">
                  <svg class="shrink-0 size-3.5" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path class="hs-password-active:hidden" d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                    <path class="hs-password-active:hidden" d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                    <path class="hs-password-active:hidden" d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                    <line class="hs-password-active:hidden" x1="2" x2="22" y1="2" y2="22"></line>
                    <path class="hidden hs-password-active:block" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                    <circle class="hidden hs-password-active:block" cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
          </div>
          <div class="input max-w-sm mb-4">
              <label class="label-text my-auto me-3 p-0" for="new_password1">Password Baru</label>
              <div class="relative">
                {{ form.new_password1 }}
                <button type="button" data-hs-toggle-password='{
                      "target": ["#old-password", "#new-password1", "#new-password2"]
                    }' class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500">
                    <svg class="shrink-0 size-3.5" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path class="hs-password-active:hidden" d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                      <path class="hs-password-active:hidden" d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                      <path class="hs-password-active:hidden" d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                      <line class="hs-password-active:hidden" x1="2" x2="22" y1="2" y2="22"></line>
                      <path class="hidden hs-password-active:block" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                      <circle class="hidden hs-password-active:block" cx="12" cy="12" r="3"></circle>
                    </svg>
                  </button>
              </div>
          </div>
          <div class="input max-w-sm mb-4">
              <label class="label-text my-auto me-3 p-0" for="new_password2">Konfirmasi Password</label>
              <div class="relative">
                {{ form.new_password2 }}
                <button type="button" data-hs-toggle-password='{
                    "target": ["#old-password", "#new-password1", "#new-password2"]
                  }' class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500">
                  <svg class="shrink-0 size-3.5" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path class="hs-password-active:hidden" d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                    <path class="hs-password-active:hidden" d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                    <path class="hs-password-active:hidden" d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                    <line class="hs-password-active:hidden" x1="2" x2="22" y1="2" y2="22"></line>
                    <path class="hidden hs-password-active:block" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                    <circle class="hidden hs-password-active:block" cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
            </div>
            <div class="p-1 text-xs" id="password_match_message"></div>
          <button
          type="submit"
          class="bg-gradient-to-r from-indigo-500 to-blue-500 text-white font-bold py-2 px-4 rounded-md mt-4 hover:bg-indigo-600 hover:to-blue-600 transition ease-in-out duration-150">
          Simpan
        </button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="{% static "js/preline.js" %}"></script>
<script>
  var loadFile = function(event) {
    var output = document.getElementById('myimage');
    output.src = URL.createObjectURL(event.target.files[0]);
    output.onload = function() {
      URL.revokeObjectURL(output.src) // free memory
    }
  };
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('new-password1');
    const confirmPasswordInput = document.getElementById('new-password2');
    const messageElement = document.getElementById('password_match_message');

    function checkPasswordMatch() {
        if (passwordInput.value === confirmPasswordInput.value) {
            messageElement.textContent = 'Passwords cocok!';
            messageElement.style.color = 'green';
        } else {
            messageElement.textContent = 'Passwords tidak cocok.';
            messageElement.style.color = 'red';
        }
    }

    // Add event listeners to trigger the check
    passwordInput.addEventListener('keyup', checkPasswordMatch);
    confirmPasswordInput.addEventListener('keyup', checkPasswordMatch);
  });
</script>


{% endblock %}
